{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "Get API Token",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get API Token": {
      "main": [
        [
          {
            "node": "List all Managed Devices",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "List all Managed Devices": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s)": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Get Location",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Location": {
      "main": [
        [
          {
            "node": "Search for Device",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Get row(s)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search for Device": {
      "main": [
        [
          {
            "node": "Update Warranty",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Warranty": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Filter1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2026-01-16T05:16:01.278Z",
  "id": "Flf08hir9PieIKsp",
  "isArchived": false,
  "meta": null,
  "name": "SnipeIT - Update Location",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -400,
        40
      ],
      "id": "489e8a7a-bffb-48ef-9e78-4c12c1b3596a",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "FVGc9R5kchTK7wsd",
          "mode": "list",
          "cachedResultName": "SnipeIT",
          "cachedResultUrl": "/projects/gMwV5v9nxJB6matq/datatables/FVGc9R5kchTK7wsd"
        },
        "matchType": "allConditions",
        "filters": {
          "conditions": [
            {
              "keyName": "User",
              "keyValue": "nryall"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -176,
        40
      ],
      "id": "78a8882f-18bf-431b-a066-9bd5a60c199a",
      "name": "Get API Token"
    },
    {
      "parameters": {
        "url": "https://graph.microsoft.com/v1.0/deviceManagement/managedDevices",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "microsoftEntraOAuth2Api",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        48,
        40
      ],
      "id": "806c3860-73ed-43ce-9ac6-3d555ec0b3ba",
      "name": "List all Managed Devices",
      "credentials": {
        "microsoftSharePointOAuth2Api": {
          "id": "8eWNjQciijocacKo",
          "name": "Microsoft SharePoint account"
        },
        "microsoftEntraOAuth2Api": {
          "id": "KdYKykHvS322gNtb",
          "name": "Microsoft Entra ID (Azure Active Directory) account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "value",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        272,
        40
      ],
      "id": "6a9fe58a-9bfe-4d69-9d4e-328217d68514",
      "name": "Split Out"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        944,
        40
      ],
      "id": "67738832-22ad-42ff-8bdd-04ae5237857d",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "lsINP70DmcZtIj4M",
          "mode": "list",
          "cachedResultName": "ZenotiClinics",
          "cachedResultUrl": "/projects/gMwV5v9nxJB6matq/datatables/lsINP70DmcZtIj4M"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "Abb",
              "condition": "ilike",
              "keyValue": "={{ $json.deviceCategoryDisplayName }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1.1,
      "position": [
        1392,
        -32
      ],
      "id": "59904dae-b59e-469e-9000-84168738a3c6",
      "name": "Get row(s)"
    },
    {
      "parameters": {
        "jsCode": "// Set your variable here or pull it from another node\nconst value = $input.first().json.name; \n// or: const value = $('Previous Node').first().json.name;\n\nconst newValue = `${value} Clinic`;\n\nreturn [\n  {\n    json: {\n      FullClinicName: newValue\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1616,
        -32
      ],
      "id": "ec066ed3-5022-4085-ba12-13a5cf55670a",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "url": "https://assets.ashleyandmartin.local/api/v1/locations",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "50"
            },
            {
              "name": "offset",
              "value": "0"
            },
            {
              "name": "name",
              "value": "={{ $json.FullClinicName }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/json, application/json"
            },
            {
              "name": "Authorization",
              "value": "=Bearer {{ $('Get API Token').first().json.Key }}"
            }
          ]
        },
        "options": {
          "allowUnauthorizedCerts": true
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1840,
        -32
      ],
      "id": "12c23ce2-2d34-461c-ada2-ff68c905340e",
      "name": "Get Location"
    },
    {
      "parameters": {
        "url": "https://assets.ashleyandmartin.local/api/v1/hardware",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "2"
            },
            {
              "name": "offset",
              "value": "0"
            },
            {
              "name": "search",
              "value": "={{ $('Loop Over Items').item.json.serialNumber }}"
            },
            {
              "name": "sort",
              "value": "created_at"
            },
            {
              "name": "order",
              "value": "desc"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/json"
            },
            {
              "name": "Authorization",
              "value": "=Bearer {{ $('Get API Token').first().json.Key }}"
            }
          ]
        },
        "options": {
          "allowUnauthorizedCerts": true
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2064,
        -32
      ],
      "id": "46c380bc-c469-4484-a554-ededbf4fe5da",
      "name": "Search for Device"
    },
    {
      "parameters": {
        "amount": 2
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        1168,
        -32
      ],
      "id": "1112f826-9291-4340-870d-0742cc8fe733",
      "name": "Wait",
      "webhookId": "1497828b-d79d-4517-b85d-bbaf1a094630"
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "=https://assets.ashleyandmartin.local/api/v1/hardware/{{ $json.rows[0].id }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/json, application/json"
            },
            {
              "name": "Authorization",
              "value": "=Bearer {{ $('Get API Token').first().json.Key }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"name\": \"{{ $('Loop Over Items').item.json.deviceName }}\",\n  \"location_id\": \"{{ $('Get Location').item.json.rows[0].id }}\"\n}",
        "options": {
          "allowUnauthorizedCerts": true
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2288,
        48
      ],
      "id": "e95f774a-d24e-47ff-8e6f-cef9428f6ce8",
      "name": "Update Warranty"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "981418de-dc2e-4de3-b9d5-efcadf72414c",
              "leftValue": "={{ $json.deviceName }}",
              "rightValue": "LAPTOP-M9EV1A9N",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "9f16a339-4df4-4fe4-a83e-f219d08e6789",
              "leftValue": "={{ $json.deviceName }}",
              "rightValue": "BOARDROOM",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "9004cfea-cd58-45c2-a7e2-589460ce95de",
              "leftValue": "={{ $json.deviceName }}",
              "rightValue": "HO-AUTOBOT",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "76831661-44ce-44ec-8f5e-721578cd82d3",
              "leftValue": "={{ $json.deviceName }}",
              "rightValue": "Col iPad",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "c442c72e-9f84-4aef-9b5b-f6f592a0498b",
              "leftValue": "={{ $json.deviceName }}",
              "rightValue": "MacBook",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "84731e00-8df0-4155-8da0-e20811fcf616",
              "leftValue": "={{ $json.deviceName }}",
              "rightValue": "Intune-DT-Luke",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "2498e355-adb2-44de-a625-aa54770c7823",
              "leftValue": "={{ $json.operatingSystem }}",
              "rightValue": "Android",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "af7040dd-f64f-42e4-90cd-9c0c2165af38",
              "leftValue": "={{ $json.deviceCategoryDisplayName }}",
              "rightValue": "Windows 11",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "a0b91bde-a109-41ee-badd-c330a17fa589",
              "leftValue": "={{ $json.deviceName }}",
              "rightValue": "ADE03",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [
        496,
        40
      ],
      "id": "cee06149-c916-499e-bf1d-4d90aa5f6bf3",
      "name": "Filter"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "91fc3dbe-a95c-450b-9062-d9aac655ccea",
              "leftValue": "={{ $json.deviceCategoryDisplayName }}",
              "rightValue": "Unknown",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [
        720,
        40
      ],
      "id": "5a4d88d3-d1ef-4338-a867-3dd881c2a9fb",
      "name": "Filter1"
    }
  ],
  "origin": "n8n",
  "pinData": {},
  "repo": {
    "owner": "AMNicholasRyall",
    "name": "n8n-workflow-Backup"
  },
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "shared": [
    {
      "updatedAt": "2026-01-16T05:16:01.280Z",
      "createdAt": "2026-01-16T05:16:01.280Z",
      "role": "workflow:owner",
      "workflowId": "Flf08hir9PieIKsp",
      "projectId": "gMwV5v9nxJB6matq"
    }
  ],
  "staticData": null,
  "tags": [
    {
      "updatedAt": "2025-12-05T00:51:56.073Z",
      "createdAt": "2025-12-05T00:51:56.073Z",
      "id": "N5UMYKN3CMwB8JVM",
      "name": "SnipeIT"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2026-01-16T05:57:27.038Z",
  "versionId": "b02058d1-1b8b-4211-bdee-2af4902df2ef"
}